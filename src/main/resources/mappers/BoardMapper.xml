<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.todo.board.BoardMapper">

    <insert id="insBoard" useGeneratedKeys="true" keyProperty="boardIndex">      <!-- 보드 포스트 -->
        INSERT INTO board
        SET board_title = #{boardTitle}
    </insert>

    <update id="updBoardTitle">      <!-- 보드 제목 수정 -->
        UPDATE board
        SET board_title = #{boardTitle}
        WHERE board_index = #{boardIndex}
    </update>
    <update id="updBoardPin">      <!-- 핀 설정 -->
        UPDATE board
        SET pin = #{pin}
        WHERE board_index = #{boardIndex}
    </update>
    <select id="getPinSum">      <!-- 핀 개수 -->
        SELECT SUM(pin) AS pinSum
        FROM board
    </select>

    <select id="getBoardList">      <!-- 보드 리스트 -->
        SELECT board_index AS boardIndex, board_title AS boardTitle, created_at AS createdAt, pin
        FROM board
        ORDER BY pin DESC, board_index
    </select>

    <delete id="delBoard">      <!-- 보드 삭제 -->
        DELETE FROM board
        WHERE board_index = #{boardIndex}
    </delete>
    <select id="countItemIndex">
        SELECT COUNT(item_index)
        FROM item
        WHERE board_index = #{boardIndex}
    </select>

</mapper>